// Object Based Flow Charts 
// obfc.js, v1.1
// Copyright (c)2017 Erdinç Uzun
// Distributed under MIT license
// https://github.com/erdincuzun/obfc.js
var polyline_start="<polyline points=",polyline_end=' style="fill:none;stroke:black;stroke-width:2" marker-end="url(#arrow)" />',object_array=[],line_array=[],id_theSVG="demo",id_theDesc="desc",open_ruler=!1,fill_color="white",stroke_color="black",text_color="black",highlight_color="red",onclick_enabled=!0,objectcollision_enabled=!0;function prepare_SVG(t){if(id_theSVG=t,line_array=[],object_array=[],document.getElementById(id_theSVG).innerHTML='<defs><marker id="arrow" markerWidth="8" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth"> <path d="M0,0 L0,6 L9,3 z" fill="black" /> </marker> </defs>',document.getElementById(id_theSVG).innerHTML+='<defs><marker id="arrow2" markerWidth="8" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth"> <path d="M0,0 L0,6 L9,3 z" fill="red" /> </marker> </defs>',open_ruler){document.getElementById(id_theSVG).innerHTML+='<defs><pattern id="smallGrid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="gray" stroke-width="0.5" /></pattern>',document.getElementById(id_theSVG).innerHTML+='<pattern id="grid" width="100" height="100" patternUnits="userSpaceOnUse"><rect width="100" height="100" fill="url(#smallGrid)" /><path d="M 100 0 L 0 0 0 100" fill="none" stroke="gray" stroke-width="1" /></pattern></defs>',document.getElementById(id_theSVG).innerHTML+='<rect width="100%" height="100%" fill="url(#grid)" />';var i=document.getElementById(id_theSVG).clientWidth/100,e=document.getElementById(id_theSVG).clientHeight/100;0==i&&(i=10),0==e&&(e=10),document.getElementById(id_theSVG).innerHTML+="<text x='0' y='13' fill='blue'>0,0</text>";for(var s=1;s<i;s++)document.getElementById(id_theSVG).innerHTML+='<text x="'+100*s+'" y="13" fill="blue" text-anchor="middle">'+100*s+"</text>";for(s=1;s<e;s++)document.getElementById(id_theSVG).innerHTML+='<text x="0" y="'+(100*s+6)+'" fill="blue">'+100*s+"</text>"}}function Process(t,i,e,s,h,r,l,o,_){this.Name="Process",this.ID="",this.middle_x=t,this.middle_y=i,void 0!==e&&null!=e||(e=1),this.size=e,this.text=s,void 0!==h&&null!=h||(h=12),this.text_size=h*e,this.probable_x_y=[[0,0],[0,0],[0,0],[0,0]],this.points=[!1,!1,!1,!1],this.width=125*this.size,this.height=50*this.size,this.start_x=this.middle_x-this.width/2,this.start_y=this.middle_y-this.height/2,this.text=[],this.text=void 0===s||null==s?[]:"string"==typeof s?[s]:s,this.description="",this.description=void 0===r||null==r?"":r,this.fill_color="white",this.fill_color=void 0===l||null==l?fill_color:l,this.stroke_color="black",this.stroke_color=void 0===l||null==l?stroke_color:o,this.text_color="black",this.text_color=void 0===_||null==_?text_color:_,this.probable_x_y[0][0]=this.middle_x,this.probable_x_y[0][1]=this.middle_y-this.height/2,this.probable_x_y[1][0]=this.middle_x,this.probable_x_y[1][1]=this.middle_y+this.height/2,this.probable_x_y[2][0]=this.middle_x-this.width/2,this.probable_x_y[2][1]=this.middle_y,this.probable_x_y[3][0]=this.middle_x+this.width/2,this.probable_x_y[3][1]=this.middle_y,this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<rect x="'+this.start_x+'" y="'+this.start_y+'" width="'+this.width+'" height="'+this.height+'" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function PredefinedProcess(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Predefined Process",this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<rect x="'+this.start_x+'" y="'+this.start_y+'" width="'+this.width+'" height="'+this.height+'" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',temp+='<line x1="'+(this.start_x+this.width/10)+'" y1="'+this.start_y+'" x2="'+(this.start_x+this.width/10)+'" y2="'+(this.start_y+this.height)+'" style="stroke:'+this.stroke_color+';stroke-width:2" />',temp+='<line x1="'+(this.start_x+this.width-this.width/10)+'" y1="'+this.start_y+'" x2="'+(this.start_x+this.width-this.width/10)+'" y2="'+(this.start_y+this.height)+'" style="stroke:'+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function AlternateProcess(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Alternate Process",this.Draw=function(){var t=5*this.size,i=5*this.size;return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<rect x="'+this.start_x+'" y="'+this.start_y+'" rx="'+t+'" ry="'+i+'" width="'+this.width+'" height="'+this.height+'" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function Delay(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Delay",this.width=100*this.size,this.height=50*this.size,this.probable_x_y=[[0,0],[0,0],[0,0]],this.probable_x_y[0][0]=this.middle_x*this.size-12*this.size,this.probable_x_y[0][1]=this.middle_y-this.height/2,this.probable_x_y[1][0]=this.middle_x*this.size-12*this.size,this.probable_x_y[1][1]=this.middle_y+this.height/2,this.probable_x_y[2][0]=this.middle_x-this.width/2-12*this.size,this.probable_x_y[2][1]=this.middle_y,this.Draw=function(){this.size,this.size;var t=220*this.size;return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<path d="M'+this.start_x+" "+this.start_y+" L"+(this.start_x+this.width/2)+" "+this.start_y+" C"+(this.start_x+this.width/2)+" "+this.start_y+", "+(this.start_x+t)+" "+(this.start_y+this.height/2)+", "+(this.start_x+this.width/2)+" "+(this.start_y+this.height)+" L"+this.start_x+" "+(this.start_y+this.height)+" L"+this.start_x+" "+this.start_y+'" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x-25*this.size,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function Preparation(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Preparation",this.width=150*this.size,this.height=50*this.size,this.start_x=this.middle_x-this.width/2,this.start_y=this.middle_y-this.height/2,this.probable_x_y[0][0]=this.middle_x,this.probable_x_y[0][1]=this.middle_y-this.height/2,this.probable_x_y[1][0]=this.middle_x,this.probable_x_y[1][1]=this.middle_y+this.height/2,this.probable_x_y[2][0]=this.middle_x-this.width/2,this.probable_x_y[2][1]=this.middle_y,this.probable_x_y[3][0]=this.middle_x+this.width/2,this.probable_x_y[3][1]=this.middle_y,this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<polygon points="'+(this.start_x+25*this.size)+","+this.start_y+" "+(this.start_x+this.width-25*this.size)+","+this.start_y+" "+(this.start_x+this.width)+","+(this.start_y+this.height-25*this.size)+" "+(this.start_x+this.width-25*this.size)+","+(this.start_y+this.height)+" "+(this.start_x+25*this.size)+","+(this.start_y+this.height)+" "+this.start_x+","+(this.start_y+this.height-25*this.size)+'" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function ManualOperation(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Manual Operation",this.probable_x_y[2][0]=this.middle_x-(this.width/2-10*this.size),this.probable_x_y[2][1]=this.middle_y,this.probable_x_y[3][0]=this.middle_x+(this.width/2-10*this.size),this.probable_x_y[3][1]=this.middle_y,this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<polygon points="'+this.start_x+","+this.start_y+" "+(this.start_x+this.width)+","+this.start_y+" "+(this.start_x+this.width-20*this.size)+","+(this.start_y+this.height)+" "+(this.start_x+20*this.size)+","+(this.start_y+this.height)+' " style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function Terminal(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Terminal",this.Draw=function(){var t=25*this.size,i=35*this.size;return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<rect x="'+this.start_x+'" y="'+this.start_y+'" rx="'+t+'" ry="'+i+'" width="'+this.width+'" height="'+this.height+'" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function Decision(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Decision",this.width_c=75*this.size,this.height_c=75*this.size,this.start_x_c=this.middle_x-this.width_c/2,this.start_y_c=this.middle_y-this.height_c/2,this.height=2*Math.sqrt(this.width_c*this.width_c/2),this.width=2*Math.sqrt(this.width_c*this.width_c/2),this.start_x=this.middle_x-this.width/2,this.start_y=this.middle_y-this.width/2,this.sekmiddle_y=this.middle_y+Math.sqrt(this.width*this.width+this.height*this.height)/2,this.probable_x_y[0][0]=this.middle_x,this.probable_x_y[0][1]=this.middle_y-Math.sqrt(this.width_c*this.width_c/2),this.probable_x_y[1][0]=this.middle_x,this.probable_x_y[1][1]=this.middle_y+Math.sqrt(this.width_c*this.width_c/2),this.probable_x_y[2][0]=this.middle_x-Math.sqrt(this.width_c*this.width_c/2),this.probable_x_y[2][1]=this.middle_y,this.probable_x_y[3][0]=this.middle_x+Math.sqrt(this.width_c*this.width_c/2),this.probable_x_y[3][1]=this.middle_y,this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<rect transform="rotate(45 '+this.middle_x+" "+this.middle_y+')" x="'+this.start_x_c+'" y="'+this.start_y_c+'" width="'+this.width_c+'" height="'+this.height_c+'" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,2*this.height/5,"center",_)),temp+="</g>",temp}}function Connector(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Connector (Inspection)",this.width=30*e,this.height=30*e,this.start_x=t-this.width/2,this.start_y=i-this.height/2,this.probable_x_y[0][0]=this.middle_x,this.probable_x_y[0][1]=this.middle_y-this.height/2,this.probable_x_y[1][0]=this.middle_x,this.probable_x_y[1][1]=this.middle_y+this.height/2,this.probable_x_y[2][0]=this.middle_x-this.width/2,this.probable_x_y[2][1]=this.middle_y,this.probable_x_y[3][0]=this.middle_x+this.width/2,this.probable_x_y[3][1]=this.middle_y,this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<circle cx="'+this.middle_x+'" cy="'+this.middle_y+'" r="'+this.width/2+'" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y-2,this.height,"center",_)),temp+="</g>",temp}}function OffPage_Connector(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Off-Page Connector",this.width=40*e,this.height=40*e,this.start_x=t-this.width/2,this.start_y=i-this.height/2,this.probable_x_y[0][0]=this.middle_x,this.probable_x_y[0][1]=this.middle_y-this.height/2,this.probable_x_y[1][0]=this.middle_x,this.probable_x_y[1][1]=this.middle_y+this.height/2,this.probable_x_y[2][0]=this.middle_x-this.width/2,this.probable_x_y[2][1]=this.middle_y-5*this.size,this.probable_x_y[3][0]=this.middle_x+this.width/2,this.probable_x_y[3][1]=this.middle_y-5*this.size,this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<polygon points="'+this.start_x+","+this.start_y+" "+(this.start_x+this.width)+","+this.start_y+" "+(this.start_x+this.width)+","+(this.start_y+this.height-10*this.size)+" "+this.middle_x+","+(this.middle_y+this.height/2)+" "+this.start_x+","+(this.start_y+this.height-10*this.size)+' " style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y-5*this.size,this.height,"center",_)),temp+="</g>",temp}}function OR(t,i,e,s,h,r,l){Connector.call(this,t,i,e,"","",s,h,r,l),this.Name="OR",this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<circle cx="'+this.middle_x+'" cy="'+this.middle_y+'" r="'+this.width/2+'" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',temp+='<line x1="'+this.middle_x+'" y1="'+(this.middle_y-this.width/2)+'" x2="'+this.middle_x+'" y2="'+(this.middle_y+this.width/2)+'" style="stroke:'+this.stroke_color+';stroke-width:2" />',temp+='<line x1="'+(this.middle_x-this.width/2)+'" y1="'+this.middle_y+'" x2="'+(this.middle_x+this.width/2)+'" y2="'+this.middle_y+'" style="stroke:'+this.stroke_color+';stroke-width:2" />',temp+="</g>",temp}}function SummingJunction(t,i,e,s,h,r,l){Connector.call(this,t,i,e,"","",s,h,r,l),this.Name="Summing Junction",this.Draw=function(){var t=Math.sqrt(this.width*this.width/8);return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<circle cx="'+this.middle_x+'" cy="'+this.middle_y+'" r="'+this.width/2+'" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',temp+='<line x1="'+(this.middle_x-t)+'" y1="'+(this.middle_y-t)+'" x2="'+(this.middle_x+t)+'" y2="'+(this.middle_y+t)+'" style="stroke:'+this.stroke_color+';stroke-width:2" />',temp+='<line x1="'+(this.middle_x+t)+'" y1="'+(this.middle_y-t)+'" x2="'+(this.middle_x-t)+'" y2="'+(this.middle_y+t)+'" style="stroke:'+this.stroke_color+';stroke-width:2" />',temp+="</g>",temp}}function Data(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Data (Input/Output)",this.probable_x_y[0][0]=this.middle_x,this.probable_x_y[0][1]=this.middle_y-this.height/2,this.probable_x_y[1][0]=this.middle_x,this.probable_x_y[1][1]=this.middle_y+this.height/2,this.probable_x_y[2][0]=this.middle_x-(this.width/2-10*this.size),this.probable_x_y[2][1]=this.middle_y,this.probable_x_y[3][0]=this.middle_x+(this.width/2-10*this.size),this.probable_x_y[3][1]=this.middle_y,this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<polygon points="'+(this.start_x+20*this.size)+","+this.start_y+" "+(this.start_x+this.width)+","+this.start_y+" "+(this.start_x+this.width-20*this.size)+","+(this.start_y+this.height)+" "+this.start_x+","+(this.start_y+this.height)+'" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function Document(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Document",this.probable_x_y[2][0]=this.middle_x-this.width/2+1*this.size,this.probable_x_y[2][1]=this.middle_y,this.probable_x_y[3][0]=this.middle_x+this.width/2-1*this.size,this.probable_x_y[3][1]=this.middle_y,this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<path d="M '+this.start_x+" "+this.start_y+" L "+this.start_x+" "+(this.start_y+this.height)+" ",temp+="Q "+(this.start_x+this.width/4)+" "+(this.start_y+this.height+15*this.size)+", "+(this.start_x+this.width/2)+" "+(this.start_y+this.height),temp+="T "+(this.start_x+this.width)+" "+(this.start_y+this.height),temp+="L "+(this.start_x+this.width)+" "+this.start_y+' Z"',temp+=' style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function MultiDocument(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Multi - Document",this.probable_x_y[1][0]=this.middle_x,this.probable_x_y[1][1]=this.middle_y+this.height/2+5*this.size,this.probable_x_y[2][0]=this.middle_x-this.width/2-8*this.size,this.probable_x_y[2][1]=this.middle_y+5*this.size,this.Draw=function(){temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">';for(var t=0;t<3;t++){var i=4*-t*this.size;temp+='<path d="M '+(this.start_x+i)+" "+(this.start_y-i)+" L "+(this.start_x+i)+" "+(this.start_y-i+this.height)+" ",temp+="Q "+(this.start_x+i+this.width/4)+" "+(this.start_y-i+this.height+15*this.size)+", "+(this.start_x+i+this.width/2)+" "+(this.start_y-i+this.height),temp+="T "+(this.start_x+i+this.width)+" "+(this.start_y-i+this.height),temp+="L "+(this.start_x+i+this.width)+" "+(this.start_y-i)+' Z"',temp+=' style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />'}return this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x-6*this.size,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function Display(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Display",this.probable_x_y[3][0]=this.middle_x+this.width/2-1*this.size,this.probable_x_y[3][1]=this.middle_y,this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<path d="M '+(this.start_x+15*this.size)+" "+this.start_y+" L "+(this.start_x+this.width-20*this.size)+" "+this.start_y+" ",temp+="Q "+(this.start_x+this.width+17*this.size)+" "+this.middle_y+", "+(this.start_x+this.width-20*this.size)+" "+(this.start_y+this.height),temp+="L "+(this.start_x+15*this.size)+" "+(this.start_y+this.height)+" ",temp+="L "+this.start_x+" "+this.middle_y+' Z"',temp+=' style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function ManualInput(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Manual Input",this.probable_x_y[0][0]=this.middle_x,this.probable_x_y[0][1]=this.middle_y-this.height/2+5*this.size,this.probable_x_y[2][0]=this.start_x,this.probable_x_y[2][1]=this.middle_y+3*this.size,this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<polygon points="'+this.start_x+","+(this.start_y+10*this.size)+" "+(this.start_x+this.width)+","+this.start_y+" "+(this.start_x+this.width)+","+(this.start_y+this.height)+" "+this.start_x+","+(this.start_y+this.height)+'" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function Card(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Manual Input",this.probable_x_y[0][0]=this.middle_x,this.probable_x_y[0][1]=this.middle_y-this.height/2+5*this.size,this.probable_x_y[2][0]=this.start_x,this.probable_x_y[2][1]=this.middle_y+3*this.size,this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<polygon points="'+this.start_x+","+(this.start_y+10*this.size)+" "+(this.start_x+15*this.size)+","+this.start_y+" "+(this.start_x+this.width)+","+this.start_y+" "+(this.start_x+this.width)+","+(this.start_y+this.height)+" "+this.start_x+","+(this.start_y+this.height)+'" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function PunchedTape(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Punched Tape",this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<path d="M '+this.start_x+" "+this.start_y+" L "+this.start_x+" "+(this.start_y+this.height)+" ",temp+="Q "+(this.start_x+this.width/4)+" "+(this.start_y+this.height+10*this.size)+", "+(this.start_x+this.width/2)+" "+(this.start_y+this.height),temp+="T "+(this.start_x+this.width)+" "+(this.start_y+this.height),temp+="L "+(this.start_x+this.width)+" "+this.start_y+" ",temp+="Q "+(this.start_x+this.width-this.width/4)+" "+(this.start_y-10*this.size)+", "+(this.start_x+this.width/2)+" "+this.start_y,temp+="T "+this.start_x+" "+this.start_y+' Z"',temp+=' style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function StoredData(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Stored Data",this.probable_x_y[2][0]=this.start_x+3*this.size,this.probable_x_y[2][1]=this.middle_y,this.probable_x_y[3][0]=this.middle_x+this.width/2-7*this.size,this.probable_x_y[3][1]=this.middle_y,this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<path d="M '+(this.start_x+15*this.size)+" "+this.start_y+" L "+(this.start_x+this.width)+" "+this.start_y+" ",temp+="Q "+(this.start_x+this.width-15*this.size)+" "+this.middle_y+","+(this.start_x+this.width)+" "+(this.start_y+this.height),temp+="L "+(this.start_x+15*this.size)+" "+(this.start_y+this.height)+" ",temp+="Q "+(this.start_x-10*this.size)+" "+this.middle_y+", "+(this.start_x+15*this.size)+" "+this.start_y+' Z"',temp+=' style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function MagneticDisk(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Magnetic Disk - Database",this.width=75*e,this.height=60*e,this.start_x=t-this.width/2,this.start_y=i-this.height/2,this.probable_x_y[0][0]=this.middle_x,this.probable_x_y[0][1]=this.middle_y-this.height/2,this.probable_x_y[1][0]=this.middle_x,this.probable_x_y[1][1]=this.middle_y+this.height/2,this.probable_x_y[2][0]=this.middle_x-this.width/2,this.probable_x_y[2][1]=this.middle_y-5*this.size,this.probable_x_y[3][0]=this.middle_x+this.width/2,this.probable_x_y[3][1]=this.middle_y-5*this.size,this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<path d="M '+this.start_x+" "+this.start_y,temp+=" Q "+t+" "+(this.middle_y-this.height/2-15*this.size)+", "+(this.start_x+this.width)+" "+this.start_y,temp+=" L "+(this.start_x+this.width)+" "+(this.start_y+this.height),temp+=" L "+this.start_x+" "+(this.start_y+this.height)+' Z"',temp+=' style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',temp+='<path d="M '+this.start_x+" "+this.start_y,temp+=" Q "+t+" "+(this.middle_y-this.height/2+15*this.size)+", "+(this.start_x+this.width)+" "+this.start_y+'"',temp+=' style="fill:transparent;stroke:'+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function DirectAccess(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Direct Access - Storage",this.width=75*e,this.height=75*e,this.start_x=t-this.width/2,this.start_y=i-this.height/2,this.probable_x_y[0][0]=this.middle_x,this.probable_x_y[0][1]=this.middle_y-this.height/2,this.probable_x_y[1][0]=this.middle_x,this.probable_x_y[1][1]=this.middle_y+this.height/2,this.probable_x_y[2][0]=this.middle_x-this.width/2,this.probable_x_y[2][1]=this.middle_y-5*this.size,this.probable_x_y[3][0]=this.middle_x+this.width/2,this.probable_x_y[3][1]=this.middle_y-5*this.size,this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<path d="M '+this.start_x+" "+this.start_y,temp+=" L "+(this.start_x+this.width)+" "+this.start_y,temp+=" Q "+(this.start_x+this.width+25*this.size)+" "+this.middle_y+", "+(this.start_x+this.width)+" "+(this.start_y+this.height),temp+=" L "+this.start_x+" "+(this.start_y+this.height)+' Z"',temp+=' style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',temp+='<path d="M '+(this.start_x+this.width)+" "+this.start_y,temp+=" Q "+(this.start_x+this.width-25*this.size)+" "+this.middle_y+", "+(this.start_x+this.width)+" "+(this.start_y+this.height)+'"',temp+=' style="fill:transparent;stroke:'+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function InternalStorage(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Internal Storage",this.width=75*e,this.height=75*e,this.start_x=t-this.width/2,this.start_y=i-this.height/2,this.probable_x_y[0][0]=this.middle_x,this.probable_x_y[0][1]=this.middle_y-this.height/2,this.probable_x_y[1][0]=this.middle_x,this.probable_x_y[1][1]=this.middle_y+this.height/2,this.probable_x_y[2][0]=this.middle_x-this.width/2,this.probable_x_y[2][1]=this.middle_y-5*this.size,this.probable_x_y[3][0]=this.middle_x+this.width/2,this.probable_x_y[3][1]=this.middle_y-5*this.size,this.Draw=function(){return temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<rect x="'+this.start_x+'" y="'+this.start_y+'" width="'+this.width+'" height="'+this.height+'" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',temp+='<line x1="'+this.start_x+'" y1="'+(this.start_y+this.height/5)+'" x2="'+(this.start_x+this.width)+'" y2="'+(this.start_y+this.height/5)+'" style="stroke:'+this.stroke_color+';stroke-width:2" />',temp+='<line x1="'+(this.start_x+this.width/5)+'" y1="'+this.start_y+'" x2="'+(this.start_x+this.width/5)+'" y2="'+(this.start_y+this.height)+'" style="stroke:'+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x+this.width/10,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function MagneticTape(t,i,e,s,h,r,l,o,_){Process.call(this,t,i,e,s,h,r,l,o,_),this.Name="Sequential Access Storage - Magnetic Tape",this.width=70*e,this.height=70*e,this.start_x=t-this.width/2,this.start_y=i-this.height/2,this.probable_x_y[0][0]=this.middle_x,this.probable_x_y[0][1]=this.middle_y-this.height/2-2*this.size,this.probable_x_y[1][0]=this.middle_x,this.probable_x_y[1][1]=this.middle_y+this.height/2+2*this.size,this.probable_x_y[2][0]=this.middle_x-this.width/2+2*this.size,this.probable_x_y[2][1]=this.middle_y,this.probable_x_y[3][0]=this.middle_x+this.width/2-2*this.size,this.probable_x_y[3][1]=this.middle_y,this.Draw=function(){return temp='<defs><clipPath id="magTape_'+this.ID.substring(7)+'">',temp+='<rect class="closed" x="'+this.start_x+'" y="'+this.start_y+'" width="'+this.width+'" height="'+this.height/70*54+'" />',temp+='<rect class="closed" x="'+this.start_x+'" y="'+(this.start_y+this.height/70*50)+'" width="'+this.width/70*40+'" height="'+this.height/70*52+'" />',temp+="</clipPath></defs>",temp='<g id="'+this.ID+'" ',onclick_enabled&&(temp+='onclick="doClick_Object(evt)" '),temp+='style="cursor:pointer">',temp+='<rect x="'+(this.start_x+this.width/2)+'" y="'+(this.start_y+this.height/70*50)+'" width="'+this.width/70*40+'" height="'+this.height/70*18+'" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',temp+='<circle cx="'+t+'" cy="'+i+'" r="'+this.height/70*33+'" clip-path="url(#magTape_'+this.ID.substring(7)+')" style="fill:'+this.fill_color+";stroke:"+this.stroke_color+';stroke-width:2" />',this.text.length>0&&(temp+=writeText(this.text,this.text_size,"normal",this.middle_x+this.width/10,this.middle_y,this.height,"center",_)),temp+="</g>",temp}}function doClick_Object(t){for(var i=document.getElementById(id_theSVG),e=i.getElementsByTagName("polyline"),s=0;s<e.length;s++)if(-1!=e[s].parentNode.getAttribute("id").indexOf("Line_")){var h=e[s].parentElement.getAttribute("id"),r=parseInt(h.substring(5)),l=line_array[r-1];e[s].setAttribute("style","fill:none;stroke:"+l.stroke_color+";stroke-width:2"),e[s].hasAttribute("marker-end")&&e[s].setAttribute("marker-end","url(#arrow)")}for(var o=["rect","polygon","path","circle","line"],_=0;_<o.length;_++){var d=i.getElementsByTagName(o[_]);for(s=0;s<d.length;s++)if(-1!=d[s].parentNode.getAttribute("id").indexOf("Object_")){h=d[s].parentElement.getAttribute("id"),r=parseInt(h.substring(7));var a=object_array[r-1];"Line"!=o[_]?d[s].setAttribute("style","fill:"+a.fill_color+";stroke:"+a.stroke_color+";stroke-width:2"):e[s].setAttribute("style","stroke:"+a.stroke_color+";stroke-width:2")}}var n=t.target.parentElement.childNodes;if(void 0!==n){if("tspan"==n[0].nodeName&&(n=t.target.parentElement.parentElement.childNodes),"rect"==n[0].nodeName||"polygon"==n[0].nodeName||"path"==n[0].nodeName||"circle"==n[0].nodeName){n[0].setAttribute("style","fill:white;stroke:"+highlight_color+";stroke-width:4");h=n[0].parentElement.getAttribute("id"),r=parseInt(h.substring(7));var c=(a=object_array[r-1]).ID+" - "+a.Name+", Middle x - y: "+a.middle_x+" - "+a.middle_y+", Size:"+a.size+", Width - Height: "+a.width+" - "+a.height+", Text Size:"+a.text_size+"\n";for(s=0;s<a.probable_x_y.length;s++)0==s?c+="  top x - y: ":1==s?c+="bottom x - y: ":2==s?c+="left x - y: ":3==s&&(c+="right x - y: "),c+=a.probable_x_y[s][0]+" - "+a.probable_x_y[s][1],s!=a.probable_x_y.length-1&&(c+=", ");writeConsoleText(c,"information"),document.getElementById(id_theDesc).innerHTML="";for(s=0;s<a.text.length;s++)document.getElementById(id_theDesc).innerHTML+="<h2>"+a.text[s]+"</h2><br />";document.getElementById(id_theDesc).innerHTML+="<br />"+a.description}for(s=1;s<n.length;s++)"line"==n[s].nodeName?n[s].setAttribute("style","stroke:"+highlight_color+";stroke-width:4"):"rect"!=n[s].nodeName&&"polygon"!=n[s].nodeName&&"path"!=n[s].nodeName&&"circle"!=n[s].nodeName||n[s].setAttribute("style","fill:white;stroke:"+highlight_color+";stroke-width:4")}}function writeConsoleText(t,i){var e="White";void 0===i||null==i?e="White":"information"==i?e="LightGreen":"warning"==i&&(e="LightSalmon");var s="color:Black;font-weight:bold; background-color: "+e+";";console.log("%c"+t,s)}function writeText(t,i,e,s,h,r,l,o,_){void 0===t||null==t?t=["Empty Text"]:"string"==typeof t&&(t=[t]),void 0!==i&&null!=i||(i=12),void 0!==e&&null!=e||(e="normal"),void 0!==s&&null!=s||(s=100),void 0!==h&&null!=h||(h=5),void 0!==r&&null!=r||(r=300),l=void 0===l||"center"==l||null==l?'alignment-baseline="middle" text-anchor="middle"':"",void 0!==o&&null!=o||(o="black"),void 0!==_&&null!=_||(_=!1);var d=t.length,a=r/d,n=h-r/2+a/2+6,c='<text x="'+s+'" y="'+h+'" '+l+' font-family="Verdana" font-size="'+i+'" font-weight="'+e+'" fill="'+o+'"';_&&(c+=' text-decoration = "underline"'),c+="> ";for(var y=0;y<d;y++)c+='<tspan x="'+s+'" y="'+n+'">'+t[y]+"</tspan>",n+=a;return c+="</text>"}function Line(t,i,e,s,h,r,l,o,_,d){if(this.Name="Line",this.ID="",this.text=[],this.text=void 0===h||null==h?[]:"string"==typeof h?[h]:h,this.description="",this.description=void 0===l||null==l?"":l,this.stroke_color="black",this.stroke_color=void 0===o||null==o?stroke_color:o,this.text_color="black",this.text_color=void 0===_||null==_?text_color:_,this.arrow=!1,void 0!==d&&null!=d&&(this.arrow=d),void 0!==t&&null!=t&&void 0!==i&&null!=i){if(this.o1_probable_x_y=t.probable_x_y,this.o2_probable_x_y=i.probable_x_y,void 0!==e&&null!=e&&void 0!==s&&null!=s||(e=-1,s=-1),-1==e||-1==s){var a=Connect_Two_Objects(t,i);if(null!=a){e=a[0],s=a[1];var n=parseInt(t.ID.substring(7));object_array[n-1].points[e]=!0;var c=parseInt(i.ID.substring(7));object_array[c-1].points[s]=!0}}e>t.probable_x_y.length-1&&(writeConsoleText("There is "+t.probable_x_y.length+" points in the "+t.Name,"warning"),e=t.probable_x_y.length-1),s>i.probable_x_y.length-1&&(writeConsoleText("There is "+i.probable_x_y.length+" points in the "+i.Name,"warning"),s=i.probable_x_y.length-1),this.o1_size=t.size,this.o2_size=i.size,this.big_size=this.o1_size,this.o2_size>this.o1_size&&(this.big_size=this.o2_size),this.text_size=r;var m=[0,0],p=[0,0];this.selection1=[0,0],this.selection2=[0,0],null!=t&&null!=i&&(m=[this.o1_probable_x_y[e][0],this.o1_probable_x_y[e][1]],p=[this.o2_probable_x_y[s][0],this.o2_probable_x_y[s][1]],this.selection1=[this.o1_probable_x_y[e][0],this.o1_probable_x_y[e][1]],this.selection2=[this.o2_probable_x_y[s][0],this.o2_probable_x_y[s][1]])}this.LinesData="",this.Draw=function(){if(null==t||null==i)return"";var h=10*this.o1_size,r=(this.o2_size,40*this.big_size),l=80*this.o1_size,o=80*this.o2_size,_=35*this.o1_size,d=35*this.o2_size,a="";1==e&&0==s?m[1]-p[1]<=-r?a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]+h)+" "+p[0]+","+(m[1]+h)+" "+p[0]+","+p[1]:(m[0]-p[0]>150*this.big_size?(x=m[0]-l,y=p[1]-r):m[0]-p[0]>=0?(x=m[0]+l,y=p[1]-r,m[1]-p[1]<20&&(y=m[1]-(2*_-h))):m[0]-p[0]>=-150*this.big_size?(x=m[0]-l,y=p[1]-r,m[1]-p[1]<20&&(y=m[1]-(2*_-h))):(x=m[0]+l,y=p[1]-r),a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]+h)+" "+x+","+(m[1]+h)+" "+x+","+y+" "+p[0]+","+y+" "+p[0]+","+p[1]):0==e&&1==s?m[1]-p[1]>=r?a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]-h)+" "+p[0]+","+(m[1]-h)+" "+p[0]+","+p[1]:(m[0]-p[0]>150*this.big_size?(x=m[0]-l,y=p[1]+r):m[0]-p[0]>=0?(x=m[0]+l,y=p[1]+r,m[1]-p[1]>-20&&(y=m[1]+2*_-h)):m[0]-p[0]>=-150*this.big_size?(x=m[0]-l,y=p[1]+r,m[1]-p[1]>-20&&(y=m[1]+2*_-h)):(x=m[0]+l,y=p[1]+r),a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]-h)+" "+x+","+(m[1]-h)+" "+x+","+y+" "+p[0]+","+y+" "+p[0]+","+p[1]):0==e&&0==s?m[1]-p[1]>=-30?m[0]-p[0]<70&&m[0]-p[0]>-70?(dif=m[0]-p[0]+l,m[0]-p[0]>0&&(dif=m[0]-p[0]-l),a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]-h)+" "+(m[0]-dif)+","+(m[1]-h)+" "+(m[0]-dif)+","+(p[1]-r)+" "+p[0]+","+(p[1]-r)+" "+p[0]+","+p[1]):a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]-h)+" "+m[0]+","+(p[1]-r)+" "+p[0]+","+(p[1]-r)+" "+p[0]+","+p[1]:m[0]-p[0]<70&&m[0]-p[0]>-70?(dif=l,m[0]-p[0]>0&&(dif=-l),a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]-h)+" "+(m[0]-dif)+","+(m[1]-h)+" "+(m[0]-dif)+","+(p[1]-r)+" "+p[0]+","+(p[1]-r)+" "+p[0]+","+p[1]):a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]-h)+" "+p[0]+","+(m[1]-h)+" "+p[0]+","+p[1]:1==e&&1==s?m[1]-p[1]>=0?m[0]-p[0]<70&&m[0]-p[0]>-70?(dif=l,m[0]-p[0]>0&&(dif=-l),a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]+h)+" "+(m[0]+dif)+","+(m[1]+h)+" "+(m[0]+dif)+","+(p[1]+r)+" "+p[0]+","+(p[1]+r)+" "+p[0]+","+p[1]):(m[1]-p[1]>=0&&m[1]-p[1]<=20?y=r:y=h,a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]+y)+" "+p[0]+","+(m[1]+y)+" "+p[0]+","+p[1]):m[0]-p[0]<70&&m[0]-p[0]>-70?(dif=l,m[0]-p[0]>0&&(dif=-l),a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]+h)+" "+(p[0]-dif)+","+(m[1]+h)+" "+(p[0]-dif)+","+(p[1]+r)+" "+p[0]+","+(p[1]+r)+" "+p[0]+","+p[1]):a+=m[0]+","+m[1]+" "+m[0]+","+(p[1]+r)+" "+p[0]+","+(p[1]+r)+" "+p[0]+","+p[1]:1==e&&2==s?m[1]-p[1]>=0?m[0]-p[0]<40&&m[0]-p[0]>-105?a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]+h)+"  "+(m[0]-l)+","+(m[1]+h)+" "+(m[0]-l)+","+p[1]+" "+p[0]+","+p[1]:m[0]-p[0]<-105?a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]+h)+"  "+(p[0]-r)+","+(m[1]+h)+" "+(p[0]-r)+","+p[1]+" "+p[0]+","+p[1]:m[0]-p[0]>40&&(a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]+h)+" "+(p[0]-r)+","+(m[1]+h)+" "+(p[0]-r)+","+p[1]+" "+p[0]+","+p[1]):m[0]-p[0]>-40?a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]+h)+" "+(p[0]-r)+","+(m[1]+h)+" "+(p[0]-r)+","+p[1]+" "+p[0]+","+p[1]:m[0]-p[0]<-40&&(a+=m[0]+","+m[1]+" "+m[0]+","+p[1]+"  "+p[0]+","+p[1]):2==e&&1==s?m[1]-p[1]<=0?m[0]-p[0]>=-62.5&&m[0]-p[0]<105?a+=m[0]+","+m[1]+" "+(p[0]-l)+","+m[1]+" "+(p[0]-l)+","+(p[1]+r)+" "+p[0]+","+(p[1]+r)+" "+p[0]+","+p[1]:(m[0],p[0],a+=m[0]+","+m[1]+" "+(m[0]-h)+","+m[1]+" "+(m[0]-h)+","+(p[1]+r)+" "+p[0]+","+(p[1]+r)+" "+p[0]+","+p[1]):m[0]-p[0]>=h?a+=m[0]+","+m[1]+" "+p[0]+","+m[1]+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(m[0]-h)+","+m[1]+" "+(m[0]-h)+","+(p[1]+r)+" "+p[0]+","+(p[1]+r)+" "+p[0]+","+p[1]:2==e&&2==s?m[1]-p[1]<-_?m[0]-p[0]>=-40?a+=m[0]+","+m[1]+" "+(p[0]-r)+","+m[1]+" "+(p[0]-r)+","+p[1]+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(m[0]-h)+","+m[1]+" "+(m[0]-h)+","+p[1]+" "+p[0]+","+p[1]:m[1]-p[1]>=_?m[0]-p[0]<=-r?a+=m[0]+","+m[1]+" "+(m[0]-h)+","+m[1]+" "+(m[0]-h)+","+p[1]+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(p[0]-r)+","+m[1]+" "+(p[0]-r)+","+p[1]+" "+p[0]+","+p[1]:m[0]-p[0]<0?a+=m[0]+","+m[1]+" "+(m[0]-h)+","+m[1]+" "+(m[0]-h)+","+(m[1]+_)+" "+(p[0]-r)+","+(m[1]+_)+" "+(p[0]-r)+","+p[1]+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(m[0]-h)+","+m[1]+" "+(m[0]-h)+","+(p[1]+_)+" "+(p[0]-r)+","+(p[1]+_)+" "+(p[0]-r)+","+p[1]+" "+p[0]+","+p[1]:0==e&&2==s?m[1]-p[1]>=0?m[0]-p[0]<-40?a+=m[0]+","+m[1]+" "+m[0]+","+p[1]+" "+p[0]+","+p[1]:(m[0],p[0],a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]-h)+" "+(p[0]-r)+","+(m[1]-h)+" "+(p[0]-r)+","+p[1]+" "+p[0]+","+p[1]):m[0]-p[0]<-105?a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]-h)+" "+(m[0]+l)+","+(m[1]-h)+" "+(m[0]+l)+","+p[1]+" "+p[0]+","+p[1]:m[0]-p[0]<62.5?a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]-h)+" "+(m[0]-l)+","+(m[1]-h)+" "+(m[0]-l)+","+p[1]+" "+p[0]+","+p[1]:m[1]-p[1]<0&&m[1]-p[1]>-25?a+=m[0]+","+m[1]+" "+m[0]+","+(p[1]-_)+" "+(p[0]-r)+","+(p[1]-_)+" "+(p[0]-r)+","+p[1]+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]-h)+" "+(p[0]-r)+","+(m[1]-h)+" "+(p[0]-r)+","+p[1]+" "+p[0]+","+p[1]:2==e&&0==s?m[1]-p[1]<-75?a+=m[0]+","+m[1]+" "+(m[0]-h)+","+m[1]+" "+(m[0]-h)+","+(p[1]-r)+" "+p[0]+","+(p[1]-r)+" "+p[0]+","+p[1]:m[0]-p[0]<0?m[1]-p[1]<0?a+=m[0]+","+m[1]+" "+(m[0]-h)+","+m[1]+" "+(m[0]-h)+","+(m[1]+_)+" "+p[0]+","+(m[1]+_)+" "+p[0]+","+p[1]:m[0]-p[0]<-62.5?a+=m[0]+","+m[1]+" "+(m[0]-h)+","+m[1]+" "+(m[0]-h)+","+(p[1]-r)+" "+p[0]+","+(p[1]-r)+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(p[0]-l)+","+m[1]+" "+(p[0]-l)+","+(p[1]-r)+" "+p[0]+","+(p[1]-r)+" "+p[0]+","+p[1]:m[1]-p[1]<-35?a+=m[0]+","+m[1]+" "+p[0]+","+m[1]+" "+p[0]+","+p[1]:m[0]-p[0]<80?a+=m[0]+","+m[1]+" "+(p[0]-l)+","+m[1]+" "+(p[0]-l)+","+(p[1]-r)+" "+p[0]+","+(p[1]-r)+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(m[0]-h)+","+m[1]+" "+(m[0]-h)+","+(p[1]-r)+" "+p[0]+","+(p[1]-r)+" "+p[0]+","+p[1]:0==e&&3==s?m[1]-p[1]>=0?m[0]-p[0]>40?a+=m[0]+","+m[1]+" "+m[0]+","+p[1]+" "+p[0]+","+p[1]:m[0]-p[0]>-200?a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]-h)+" "+(p[0]+r)+","+(m[1]-h)+" "+(p[0]+r)+","+p[1]+" "+p[0]+","+p[1]:m[1]-p[1]>40?a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]-h)+" "+(p[0]+r)+","+(m[1]-h)+" "+(p[0]+r)+","+p[1]+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+m[0]+","+(p[1]-d)+" "+(p[0]+r)+","+(p[1]-d)+" "+(p[0]+r)+","+p[1]+" "+p[0]+","+p[1]:m[0]-p[0]>105?a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]-h)+" "+(m[0]-l)+","+(m[1]-h)+" "+(m[0]-l)+","+p[1]+" "+p[0]+","+p[1]:m[0]-p[0]>-62.5?a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]-h)+" "+(m[0]+l)+","+(m[1]-h)+" "+(m[0]+l)+","+p[1]+" "+p[0]+","+p[1]:m[1]-p[1]<40&&m[1]-p[1]>-25?a+=m[0]+","+m[1]+" "+m[0]+","+(p[1]-_)+" "+(p[0]+r)+","+(p[1]-_)+" "+(p[0]+r)+","+p[1]+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]-h)+" "+(p[0]+r)+","+(m[1]-h)+" "+(p[0]+r)+","+p[1]+" "+p[0]+","+p[1]:3==e&&0==s?m[1]-p[1]<-75?m[0]-p[0]>-20?a+=m[0]+","+m[1]+" "+(m[0]+h)+","+m[1]+" "+(m[0]+h)+","+(p[1]-r)+" "+p[0]+","+(p[1]-r)+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+p[0]+","+m[1]+" "+p[0]+","+p[1]:m[0]-p[0]<0?m[1]-p[1]>-40?m[0]-p[0]>0?a+=m[0]+","+m[1]+" "+(m[0]+h)+","+m[1]+" "+(m[0]+h)+","+(p[1]-r)+" "+p[0]+","+(p[1]-r)+" "+p[0]+","+p[1]:m[0]-p[0]>-82.5?a+=m[0]+","+m[1]+" "+(p[0]+o)+","+m[1]+" "+(p[0]+o)+","+(p[1]-r)+" "+p[0]+","+(p[1]-r)+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(m[0]+h)+","+m[1]+" "+(m[0]+h)+","+(p[1]-r)+" "+p[0]+","+(p[1]-r)+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+p[0]+","+m[1]+" "+p[0]+","+p[1]:m[1]-p[1]>-75?m[1]-p[1]<-15?a+=m[0]+","+m[1]+" "+(m[0]+h)+","+m[1]+" "+(m[0]+h)+","+(m[1]-_)+" "+p[0]+","+(m[1]-_)+" "+p[0]+","+p[1]:m[0]-p[0]<=62.5?a+=m[0]+","+m[1]+" "+(p[0]+o)+","+m[1]+" "+(p[0]+o)+","+(p[1]-r)+" "+p[0]+","+(p[1]-r)+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(m[0]+h)+","+m[1]+" "+(m[0]+h)+","+(p[1]-r)+" "+p[0]+","+(p[1]-r)+" "+p[0]+","+p[1]:(m[0],p[0],a+=m[0]+","+m[1]+" "+(m[0]+h)+","+m[1]+" "+(m[0]+h)+","+(p[1]-r)+" "+p[0]+","+(p[1]-r)+" "+p[0]+","+p[1]):1==e&&3==s?m[1]-p[1]>25?m[0]-p[0]<=110&&m[0]-p[0]>=-32.5?a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]+h)+" "+(m[0]+l)+","+(m[1]+h)+" "+(m[0]+l)+","+p[1]+" "+p[0]+","+p[1]+" ":a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]+h)+" "+(p[0]+r)+","+(m[1]+h)+" "+(p[0]+r)+","+p[1]+" "+p[0]+","+p[1]+" ":m[1]-p[1]>-45?a+=m[0]+","+m[1]+" "+m[0]+","+(p[1]+_)+" "+(p[0]+r)+","+(p[1]+d)+" "+(p[0]+r)+","+p[1]+" "+p[0]+","+p[1]+" ":m[0]-p[0]<=40?a+=m[0]+","+m[1]+" "+m[0]+","+(m[1]+h)+" "+(p[0]+r)+","+(m[1]+h)+" "+(p[0]+r)+","+p[1]+" "+p[0]+","+p[1]+" ":a+=m[0]+","+m[1]+" "+m[0]+","+p[1]+" "+p[0]+","+p[1]+" ":3==e&&1==s?m[0]-p[0]<=-80?m[1]-p[1]<40?a+=m[0]+","+m[1]+" "+(m[0]+h)+","+m[1]+" "+(m[0]+h)+","+(p[1]+r)+" "+p[0]+","+(p[1]+r)+" "+p[0]+","+p[1]+" ":a+=m[0]+","+m[1]+" "+p[0]+","+m[1]+" "+p[0]+","+p[1]+" ":m[0]-p[0]<72.5?(document.getElementById("test").innerHTML+="POINT x",m[1]-p[1]<60?a+=m[0]+","+m[1]+" "+(p[0]+o)+","+m[1]+" "+(p[0]+o)+","+(p[1]+r)+" "+p[0]+","+(p[1]+r)+" "+p[0]+","+p[1]+" ":m[0]-p[0]>-10?a+=m[0]+","+m[1]+" "+(m[0]+h)+","+m[1]+" "+(m[0]+h)+","+(p[1]+r)+" "+p[0]+","+(p[1]+r)+" "+p[0]+","+p[1]+" ":a+=m[0]+","+m[1]+" "+p[0]+","+m[1]+" "+p[0]+","+p[1]):m[1]-p[1]<5?a+=m[0]+","+m[1]+" "+(m[0]+h)+","+m[1]+" "+(m[0]+h)+","+(p[1]+r)+" "+p[0]+","+(p[1]+r)+" "+p[0]+","+p[1]:m[1]-p[1]<60?a+=m[0]+","+m[1]+" "+(m[0]+h)+","+m[1]+" "+(m[0]+h)+","+(m[1]+_)+" "+p[0]+","+(m[1]+_)+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(m[0]+h)+","+m[1]+" "+(m[0]+h)+","+(m[1]-_)+" "+p[0]+","+(m[1]-_)+" "+p[0]+","+p[1]:2==e&&3==s?m[0]-p[0]<-95?m[1]-p[1]>0&&m[1]-p[1]<=70?a+=m[0]+","+m[1]+" "+(m[0]-10)+","+m[1]+" "+(m[0]-10)+","+(p[1]-_)+" "+(p[0]+r)+","+(p[1]-_)+" "+(p[0]+r)+","+p[1]+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(m[0]-10)+","+m[1]+" "+(m[0]-10)+","+(m[1]-_)+" "+(p[0]+r)+","+(m[1]-_)+" "+(p[0]+r)+","+p[1]+" "+p[0]+","+p[1]:m[0]-p[0]<40?a+=m[0]+","+m[1]+" "+(m[0]-10)+","+m[1]+" "+(m[0]-10)+","+(m[1]-_)+" "+(m[0]+2*l-2*h)+","+(m[1]-_)+" "+(m[0]+2*l-2*h)+","+p[1]+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(m[0]-10)+","+m[1]+" "+(m[0]-10)+","+p[1]+" "+p[0]+","+p[1]:3==e&&2==s?m[0]-p[0]>-50?m[1]-p[1]<-70?a+=m[0]+","+m[1]+" "+(m[0]+10)+","+m[1]+" "+(m[0]+10)+","+(m[1]+_)+" "+(p[0]-r)+","+(m[1]+_)+" "+(p[0]-r)+","+p[1]+" "+p[0]+","+p[1]:m[1]-p[1]>0&&m[1]-p[1]<70?a+=m[0]+","+m[1]+" "+(m[0]+10)+","+m[1]+" "+(m[0]+10)+","+(p[1]-_)+" "+(p[0]-r)+","+(p[1]-_)+" "+(p[0]-r)+","+p[1]+" "+p[0]+","+p[1]:m[0]-p[0]>95?a+=m[0]+","+m[1]+" "+(m[0]+10)+","+m[1]+" "+(m[0]+10)+","+(m[1]-_)+" "+(p[0]-r)+","+(m[1]-_)+" "+(p[0]-r)+","+p[1]+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(m[0]+10)+","+m[1]+" "+(m[0]+10)+","+(m[1]-_)+" "+(m[0]-(2*l-2*h))+","+(m[1]-_)+" "+(m[0]-(2*l-2*h))+","+p[1]+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(m[0]+10)+","+m[1]+" "+(m[0]+10)+","+p[1]+" "+p[0]+","+p[1]:3==e&&3==s?m[1]-p[1]<-50?m[0]-p[0]<=30?a+=m[0]+","+m[1]+" "+(p[0]+r)+","+m[1]+" "+(p[0]+r)+","+p[1]+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(m[0]+h)+","+m[1]+" "+(m[0]+h)+","+p[1]+" "+p[0]+","+p[1]:m[0]-p[0]<=170?m[1]-p[1]>-40&&m[1]-p[1]<40?m[0]-p[0]<=-150&&m[1]-p[1]>0?a+=m[0]+","+m[1]+" "+(m[0]+10)+","+m[1]+" "+(m[0]+10)+","+(p[1]-_)+" "+(p[0]+r)+","+(p[1]-_)+" "+(p[0]+r)+","+p[1]+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(m[0]+10)+","+m[1]+" "+(m[0]+10)+","+(m[1]-_)+" "+(p[0]+r)+","+(m[1]-_)+" "+(p[0]+r)+","+p[1]+" "+p[0]+","+p[1]:m[0]-p[0]<40?a+=m[0]+","+m[1]+" "+(p[0]+r)+","+m[1]+" "+(p[0]+r)+","+p[1]+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(m[0]+h)+","+m[1]+" "+(m[0]+h)+","+p[1]+" "+p[0]+","+p[1]:m[1]-p[1]>-40&&m[1]-p[1]<40?a+=m[0]+","+m[1]+" "+(m[0]+10)+","+m[1]+" "+(m[0]+10)+","+(m[1]-_)+" "+(p[0]+r)+","+(m[1]-_)+" "+(p[0]+r)+","+p[1]+" "+p[0]+","+p[1]:a+=m[0]+","+m[1]+" "+(m[0]+h)+","+m[1]+" "+(m[0]+h)+","+p[1]+" "+p[0]+","+p[1]:(document.getElementById("test").innerHTML+="Error",a+=m[0]+","+m[1]+" "+p[0]+","+p[1]);var n=findLineArraycollision(a=findObjectArrayLinecollision(a));if(this.LinesData=a,a=""!=n?polyline_start+' "'+a+'" '+polyline_end.replace("black",this.stroke_color)+n:polyline_start+' "'+a+'" '+polyline_end.replace("black",this.stroke_color),console.log(this.arrow),this.arrow||(a=a.replace('marker-end="url(#arrow)"',"")),this.text.length>0){var c=this.findLongestLinePoint();a+=writeText(this.text,this.text_size,"normal",c[0]+3,c[1]-10,30,c[2],this.text_color)}var b='<g id="'+this.ID+'" ';return onclick_enabled&&(b+='onclick="doClick_Object(evt)" '),b+='style="cursor:pointer">',b+=a,b+="</g>"},this.findLongestLinePoint=function(){for(var t=this.LinesData.split(" "),i=0,e=0,s=0,h="center",r=0;r<t.length-1;r++){var l=t[r].split(","),o=t[r+1].split(","),_=Math.round(100*l[0])/100,d=Math.round(100*l[1])/100,a=Math.round(100*o[0])/100,n=Math.round(100*o[1])/100,c=Math.sqrt((_-a)*(_-a)+(d-n)*(d-n));c>i&&(e=(_+a)/2,s=(d+n)/2,h=d==n?"center":"",i=c)}return[e,s,h,h]}}function doClick_Line(t){for(var i=document.getElementById("demo"),e=i.getElementsByTagName("polyline"),s=0;s<e.length;s++)if(-1!=e[s].parentNode.getAttribute("id").indexOf("Line_")){var h=e[s].parentElement.getAttribute("id"),r=parseInt(h.substring(5)),l=line_array[r-1];e[s].setAttribute("style","fill:none;stroke:"+l.stroke_color+";stroke-width:2"),e[s].hasAttribute("marker-end")&&e[s].setAttribute("marker-end","url(#arrow)")}for(var o=["rect","polygon","path","circle","line"],_=0;_<o.length;_++){var d=i.getElementsByTagName(o[_]);for(s=0;s<d.length;s++)if(-1!=d[s].parentNode.getAttribute("id").indexOf("Object_")){h=d[s].parentElement.getAttribute("id"),r=parseInt(h.substring(7));var a=object_array[r-1];"Line"!=o[_]?d[s].setAttribute("style","fill:"+a.fill_color+";stroke:"+a.stroke_color+";stroke-width:2"):e[s].setAttribute("style","stroke:"+a.stroke_color+";stroke-width:2")}}if("tspan"==(l=t.target.parentElement.children)[0].nodeName&&(l=t.target.parentElement.parentElement.children),"polyline"==l[0].nodeName){l[0].setAttribute("style","fill:none;stroke:"+highlight_color+";stroke-width:3"),l[0].hasAttribute("marker-end")&&l[0].setAttribute("marker-end","url(#arrow2)");h=l[0].parentElement.getAttribute("id"),r=parseInt(h.substring(5));var n=(l=line_array[r-1]).ID+" - "+l.Name+"\n";writeConsoleText(n+=l.LinesData,"information"),document.getElementById(id_theDesc).innerHTML=l.description}}function Connect_Two_Objects(t,i){this.o1_probable_x_y=t.probable_x_y,this.o2_probable_x_y=i.probable_x_y,this.o1_points=t.points,this.o2_points=i.points,dif=1e7,position1=-1,position2=-1;for(var e=0;e<this.o1_probable_x_y.length;e++)for(var s=0;s<this.o2_probable_x_y.length;s++)0==this.o1_points[e]&&0==this.o2_points[s]&&(x_dif=this.o1_probable_x_y[e][0]-this.o2_probable_x_y[s][0],y_dif=this.o1_probable_x_y[e][1]-this.o2_probable_x_y[s][1],yeni_dif=Math.sqrt(x_dif*x_dif+y_dif*y_dif),yeni_dif<dif&&(dif=yeni_dif,position1=e,position2=s));return-1!=position1&&-1!=position2?[position1,position2]:null}function free_draw(t,e,s){var h=e[0],r=e[1],l=t.split(" "),o=new Line;void 0!==s&&null!=s||(s="black");var _=h+","+r+" ";for(i=0;i<l.length;i++)_error=!1,"d"==l[i].substring(0,1)?r+=parseInt(l[i].substring(1)):"u"==l[i].substring(0,1)?r-=parseInt(l[i].substring(1)):"r"==l[i].substring(0,1)?h+=parseInt(l[i].substring(1)):"l"==l[i].substring(0,1)?h-=parseInt(l[i].substring(1)):_error=!0,_error||(_+=h+","+r+" ");var d=findLineArraycollision(_=findObjectArrayLinecollision(_=_.trim())),a="";a=""!=d?polyline_start+' "'+_+'" '+polyline_end.replace("black",s)+d:polyline_start+' "'+_+'" '+polyline_end.replace("black",s),o.ID="Line_"+line_array.length,o.LinesData=_,line_array.push(o),document.getElementById(id_theSVG).innerHTML+=a}function free_write(t,i,e,s,h,r,l,o){var _=writeText(t,i,e,s,h,r,l,o);document.getElementById(id_theSVG).innerHTML+=_}function findLinecollision(t,i,e,s,h,r,l,o){t=Math.round(100*t)/100,e=Math.round(100*e)/100,h=Math.round(100*h)/100,l=Math.round(100*l)/100,i=Math.round(100*i)/100,s=Math.round(100*s)/100,r=Math.round(100*r)/100;var _=s-i,d=t-e,a=_*t+d*i,n=(o=Math.round(100*o)/100)-r,c=h-l,y=n*h+c*r,m=_*c-n*d;if(0!=m){var x=Math.round((c*a-d*y)/m*100)/100,p=Math.round((_*y-n*a)/m*100)/100,b=Math.min(t,e),g=Math.max(t,e);g-b>=6&&(b+=3,g-=3);var w=Math.min(h,l),u=Math.max(h,l);u-w>=6&&(w+=3,u-=3);var f=Math.min(i,s),k=Math.max(i,s);k-f>=6&&(f+=3,k-=3);var z=Math.min(r,o),v=Math.max(r,o);if(v-z>=6&&(z+=3,v-=3),x>=b&&x<=g&&x>=w&&x<=u&&p>=f&&p<=k&&p>=z&&p<=v)return[x,p]}return null}function findObjectcollision(t,i){for(var e=[[t.start_x-40,t.start_y-40,t.start_x+t.width+40,t.start_y-40],[t.start_x-40,t.start_y-40,t.start_x-40,t.start_y+t.height+40],[t.start_x+t.width+40,t.start_y-40,t.start_x+t.width+40,t.start_y+t.height+40],[t.start_x-40,t.start_y+t.height+40,t.start_x+t.width+40,t.start_y+t.height+40]],s=[[i.start_x,i.start_y,i.start_x+i.width,i.start_y],[i.start_x,i.start_y,i.start_x,i.start_y+i.height],[i.start_x+i.width,i.start_y,i.start_x+i.width,i.start_y+i.height],[i.start_x,i.start_y+i.height,i.start_x+i.width,i.start_y+i.height]],h=!1,r=0;r<e.length;r++)for(var l=0;l<s.length;l++){if(null!=(h=findLinecollision(e[r][0],e[r][1],e[r][2],e[r][3],s[l][0],s[l][1],s[l][2],s[l][3])))return!0}return h}function findObjectArrayLinecollision(t){for(var i=0;i<object_array.length;i++){for(var e=t.split(" "),s=object_array[i],h=[[s.start_x,s.start_y,s.start_x+s.width,s.start_y],[s.start_x,s.start_y+s.height,s.start_x+s.width,s.start_y+s.height],[s.start_x,s.start_y,s.start_x,s.start_y+s.height],[s.start_x+s.width,s.start_y,s.start_x+s.width,s.start_y+s.height]],r="",l=-1,o=-1,_=-1,d=-1,a=-1,n=-1,c=0,y=0,m=0;m<e.length-1;m++)for(var x=e[m].split(","),p=e[m+1].split(","),b=0;b<h.length;b++){var g=findLinecollision(h[b][0],h[b][1],h[b][2],h[b][3],x[0],x[1],p[0],p[1]);if(null!=g)if(0==i?r+="t":1==i?r+="b":2==i?r+="l":3==i&&(r+="r"),-1==l)l=parseFloat(g[0]),o=parseFloat(g[1]),a=m+1,c=l-s.start_x<s.start_x+s.width-l?l-(s.start_x-15):-(s.start_x+s.width-l+15),y=o-s.start_y<s.start_y+s.height-o?o-(s.start_y-15):-(s.start_y+s.height-o+15);else if(-1==_){if(_=parseFloat(g[0]),d=parseFloat(g[1]),"lr"==r&&x[0]>p[0]){r="rl";var w=l;l=_,_=w}else if("tb"==r&&x[1]<p[1]){r="bt";w=o;o=d,d=w}n=m+1;break}}var u="";if(-1!=a&&-1!=n){for(m=0;m<e.length;m++)m<a||m>n?u+=e[m]+" ":m==n&&("rb"==(r=r.substring(0,2))?u+=l+15+","+o+" "+(l+15)+","+(d+15)+" "+_+","+(d+15)+" "+e[m]+" ":"br"==r?u+=l+","+(o+15)+" "+(_+15)+","+(o+15)+" "+(_+15)+","+d+" "+e[m]+" ":"rt"==r?u+=l+15+","+o+" "+(l+15)+","+(d-15)+" "+_+","+(d-15)+" "+e[m]+" ":"tr"==r?u+=l+","+(o-15)+" "+(_+15)+","+(o-15)+" "+(_+15)+","+d+" "+e[m]+" ":"lb"==r?u+=l-15+","+o+" "+(l-15)+","+(d+15)+" "+_+","+(d+15)+" "+e[m]+" ":"bl"==r?u+=l+","+(o+15)+" "+(_-15)+","+(o+15)+" "+(_-15)+","+d+" "+e[m]+" ":"lt"==r?u+=l-15+","+o+" "+(l-15)+","+(d-15)+" "+_+","+(d-15)+" "+e[m]+" ":"tl"==r?u+=l+","+(o-15)+" "+(_-15)+","+(o-15)+" "+(_-15)+","+d+" "+e[m]+" ":"tb"==r?u+=l+","+(o-15)+" "+(_-c)+","+(o-15)+" "+(_-c)+","+(d+15)+" "+_+","+(d+15)+" "+e[m]+" ":"bt"==r?u+=l+","+(o+15)+" "+(_-c)+","+(o+15)+" "+(_-c)+","+(d-15)+" "+_+","+(d-15)+" "+e[m]+" ":"lr"==r?u+=l-15+","+o+" "+(l-15)+","+(o-y)+" "+(_+15)+","+(d-y)+" "+(_+15)+","+d+" "+e[m]+" ":"rl"==r&&(u+=l+15+","+o+" "+(l+15)+","+(o-y)+" "+(_-15)+","+(d-y)+" "+(_-15)+","+d+" "+e[m]+" "));t=u}}return t}function findLineArraycollision(t){for(var i=t.split(" "),e="",s=0;s<line_array.length;s++){var h=line_array[s].LinesData.split(" "),r=i[0].split(",");for(n=0;n<h.length-1;n++)for(var l=h[n].split(","),o=h[n+1].split(","),_=0;_<i.length-1;_++){r=i[_].split(",");var d=i[_+1].split(","),a=findLinecollision(r[0],r[1],d[0],d[1],l[0],l[1],o[0],o[1]);if(null!=a){var c=parseFloat(a[0]),y=parseFloat(a[1]);r[0]==d[0]?(e+='<line x1="'+r[0]+'" y1="'+(y-5)+'" x2="'+r[0]+'" y2="'+(y-1.5)+'" stroke="white" stroke-width="4"/>',e+='<line x1="'+r[0]+'" y1="'+(y+5)+'" x2="'+r[0]+'" y2="'+(y+1.5)+'" stroke="white"  stroke-width="4" />',e+='<defs><clipPath id="cut-off-'+c+"-"+y+'">',e+='<rect class="closed" x="'+(c-15)+'" y="'+(y-15)+'" width="15" height="30" />',e+="</clipPath></defs>",e+='<circle cx="'+c+'" cy="'+y+'" r="7" stroke-width="3" stroke="black" fill-opacity="0" fill="white" clip-path="url(#cut-off-'+c+"-"+y+')"/>'):r[1]==d[1]&&(e+='<line x1="'+(c-5)+'" y1="'+r[1]+'" x2="'+(c-1.5)+'" y2="'+r[1]+'" stroke="white" stroke-width="4" />',e+='<line x1="'+(c+5)+'" y1="'+r[1]+'" x2="'+(c+1.5)+'" y2="'+r[1]+'" stroke="white"  stroke-width="4" />',e+='<defs><clipPath id="cut-off-'+c+"-"+y+'">',e+='<rect class="closed" x="'+(c-15)+'" y="'+(y-15)+'" width="30" height="15" />',e+="</clipPath></defs>",e+='<circle cx="'+c+'" cy="'+y+'" r="7" stroke-width="3" stroke="black" fill-opacity="0" fill="white" clip-path="url(#cut-off-'+c+"-"+y+')"/>')}}}return e}function add_theObject(t){var i=!1;if(objectcollision_enabled)for(var e=0;e<object_array.length;e++)if(findObjectcollision(t,object_array[e])){i=!0;break}return i?(writeConsoleText("Object collision error / Objects are too close (min 40 px)","warning"),null):(t.ID="Object_"+(object_array.length+1),document.getElementById(id_theSVG).innerHTML+=t.Draw(),object_array.push(t),t)}function draw_theLine(t){return t.ID="Line_"+(line_array.length+1),document.getElementById(id_theSVG).innerHTML+=t.Draw(),line_array.push(t),t}function prepareClassforAnimation(t){for(i=0;i<t.length;i++){var e=t[i];if(void 0===e.ID||null==e)for(j=0;j<e.length;j++)void 0!==e[j]&&null!=e[j]&&document.getElementById(e[j].ID).setAttribute("class","animation group o"+i);else document.getElementById(e.ID).setAttribute("class","animation o"+i)}}